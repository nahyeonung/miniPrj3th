<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{/include/head :: header}">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&family=Noto+Sans+KR:wght@900&display=swap"
	rel="stylesheet">
<style>
body {
	font-family: 'Nanum Gothic', sans-serif;
}
</style>
</head>

<body>
	<!-- Start Top Nav -->
	<div th:replace="~{/include/body-header :: bodyHeader}"></div>
	<!-- Close Top Nav -->


	<!-- Header -->
	<div th:replace="~{/include/navbar :: navbar}"></div>
	<!-- Close Header -->

	<!-- Modal -->




	<!-- Start Banner Hero -->
	<div id="template-mo-zay-hero-carousel" class="carousel slide"
		data-bs-ride="carousel">
		<ol class="carousel-indicators">
			<li data-bs-target="#template-mo-zay-hero-carousel"
				data-bs-slide-to="0" class="active"></li>
			<li data-bs-target="#template-mo-zay-hero-carousel"
				data-bs-slide-to="1"></li>
			<li data-bs-target="#template-mo-zay-hero-carousel"
				data-bs-slide-to="2"></li>
		</ol>
		<div class="carousel-inner">
			<div class="carousel-item active"
				style="background-image: url('/img/banner1.png'); background-size: cover;">
				<div class="container">
					<div class="row p-5">
						<div class="mx-auto col-md-8 col-lg-6 order-lg-last">
							<!-- <img class="img-fluid" th:src="@{/img/귀칼로고.webp}" alt=""> -->
						</div>
					</div>
				</div>
			</div>
			<div class="carousel-item"
				style="background-image: url('/img/banner2.png'); background-position: center; background-size: cover;">
				<div class="container">
					<div class="row p-5">
						<div class="mx-auto col-md-8 col-lg-6 order-lg-last">
							<!-- <img class="img-fluid" th:src="@{/img/귀칼로고.webp}" alt=""> -->
						</div>
					</div>
				</div>
			</div>
			<div class="carousel-item"
				style="background-image: url('/img/banner3.png'); background-position: center; background-size: cover;">
				<div class="container">
					<div class="row p-5">
						<div class="mx-auto col-md-8 col-lg-6 order-lg-last">
							<!-- <img class="img-fluid" th:src="@{/img/귀칼로고.webp}" alt=""> -->
						</div>
					</div>
				</div>
			</div>
		</div>
		<a class="carousel-control-prev text-decoration-none w-auto ps-3"
			href="#template-mo-zay-hero-carousel" role="button"
			data-bs-slide="prev"> <i class="fas fa-chevron-left"></i>
		</a> <a class="carousel-control-next text-decoration-none w-auto pe-3"
			href="#template-mo-zay-hero-carousel" role="button"
			data-bs-slide="next"> <i class="fas fa-chevron-right"></i>
		</a>
	</div>
	<!-- End Banner Hero -->


	<!-- Start Categories of The Month -->
	<section class="container py-5">
		<div class="row text-center pt-3">
			<div class="col-lg-6 m-auto">
				<h1 class="h1">TOP3</h1>
				<p>모든 피규어들 중 구매율이 가장 높은 피규어들입니다.</p>
			</div>
		</div>
		<div class="row">
			<th:block th:each="list : ${pTopThree}">
				<div class="col-12 col-md-4 p-5 mt-3">
					<a href="#"><img style="height: 60%; width: 100%;"
						th:src="@{/file/{id}(id=${list.imageId})}"
						class="rounded-circle img-fluid border"></a>
					<h5 class="text-center mt-3 mb-3">[[${list.productName}]]([[${list.totalCnt}]]개)</h5>
					<p class="text-center">
						<a
							th:href="@{/product/productDetail/{productId}(productId=${list.productId})}"
							class="btn btn-outline-dark">Go Shop</a>
					</p>
				</div>
			</th:block>
		</div>
	</section>
	<!-- End Categories of The Month -->


	<!-- Start Featured Product -->
	<section class="bg-light">
		<div class="container py-5">
			<div class="row text-center py-3">
				<div class="col-lg-6 m-auto">
					<h1 class="h1">구매 리뷰</h1>
					<p>고객분들의 소중한 리뷰입니다.</p>
				</div>
			</div>
			<div class="row" style="overflow: hidden; flex-wrap: nowrap">
				<div id="carousel" class="row" style="flex-wrap: nowrap">
					<th:block th:each="list : ${reviewList}">
						<div class="col-12 col-md-4 mb-4">
							<div class="card h-100">
								<img th:if="${list.reviewImageId != 0}" th:src="@{/review/file/{id}(id=${list.reviewImageId})}" class="card-img-top" style="height:200px;">
                         		<img th:unless="${list.reviewImageId != 0}" th:src="@{/img/최애의아이배너.png}" class="card-img-top" style="height:200px;">
								<div class="card-body">
									<ul class="list-unstyled d-flex justify-content-between">
										<li>
										<i th:if="${list.rate>0}" class="text-warning fa fa-star"  th:each="num: ${#numbers.sequence(1, list.rate)}"></i>
                               			<i th:if="${list.rate<5}" class="text-dark fa fa-star" th:each="num: ${#numbers.sequence(1, 5-list.rate)}"></i>
										</li>
									</ul>
									<a href="shop-single.html"
										class="h3 text-decoration-none text-dark">[[${list.productName}]]</a>
									<p class="card-text">[[${list.content}]]</p>
								</div>
							</div>
						</div>
					</th:block>
				</div>
			</div>
			<div class="row" style="justify-content: space-between;">
				<button id="prev-btn"
					class="fa fa-arrow-left border-0 bg-transparent" style="width: 10%"></button>
				<div style="width: 10%"></div>
				<button id="next-btn"
					class="fa fa-arrow-right border-0 bg-transparent"
					style="width: 10%"></button>
			</div>
		</div>
	</section>
	<!-- End Featured Product -->


	<!-- Start Footer -->
	<div th:replace="~{/include/footer :: footer}"></div>
	<!-- End Footer -->

	<!-- Start Script -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
		crossorigin="anonymous"></script>
	<script src="/js/jquery-1.11.0.min.js"></script>
	<script src="/js/jquery-migrate-1.2.1.min.js"></script>
	<script src="/js/templatemo.js"></script>
	<script src="/js/custom.js"></script>
	<!-- End Script -->

	<script th:inline="javascript">
    const reviewCnt = "[[${reviewCnt}]]";
    const container = document.querySelector('#carousel');
    const prevBtn = document.querySelector('#prev-btn');
    const nextBtn = document.querySelector('#next-btn');
    (function carouselEvent(){
    	  prevBtn.addEventListener('click', translateContainer.bind(this, 1));
    	  nextBtn.addEventListener('click', translateContainer.bind(this, -1));
    })();

    function translateContainer(direction){
    	  const selectedBtn = (direction === 1) ? 'prev' : 'next';
    	  container.style.transitionDuration = '700ms';
    	  container.style.transform = `translateX(${direction * (300 / reviewCnt)}%)`;
    	  container.ontransitionend = () => reorganizeEl(selectedBtn);
    	}
    function reorganizeEl(selectedBtn) {
    	container.removeAttribute('style');
    	container.style.flexWrap = "nowrap";
    	(selectedBtn === 'prev') ? 
    	container.insertBefore(container.lastElementChild, container.firstElementChild): container.appendChild(container.firstElementChild);
    	}
    </script>
</body>

</html>